{% extends 'base.html' %}

{% block content %}

<br />
<div class="container-fluid">
  <div class="row">
    <!--PATIENT, SEARCH FORM AND VISITS LIST-->
    <div class="col-md-5">
        <!--Doctor-->
        <div class="card mb-3 text-white" id="dailyDashboard" style="max-width: 100%; border-radius: 1rem; background-color: #004080; ">
          <div class="card-header text-center">
            <h4>Daily dashboard</h4>
          </div>
          <div class="row g-0">
            <div class="col-md-6 border-right d-flex align-items-center ">
              <div class="col text-center">
                <div class="card-body">
                  <br />
                  <h5 id="date">{{ now|date:"F d, Y" }}</h5>
                </div>
              </div>
            </div>
            <div class="col-md-6 border-right d-flex align-items-center ">
              <div class="col text-center">
                <div class="card-body">
                  <br />
                  <h5 id="time">Last refresh: {{ now|time:"H:i" }}</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>

    <!--Actual/Next-->
    <div class="col-md-7">
      <div class="container">
        <div class="card mb-3 text-white" id="actualVisit" style="max-width: 100%; border-radius: 1rem; background-color:  #004080;">
          <div class="card-header text-center">
            <h4>Actual visit</h4>
          </div>
          {% if actual != null %}
          <div class="row g-0 card-text">
            <div class="col-md-5 border-right d-flex align-items-center">
              <div class="col text-center">
                <h4 id="aName">{{ actual.name.name }}</h4>
                <h6 id="aTime">{{ actual.start_time|time:"H:i" }} - {{ actual.end_time|time:"H:i" }}</h6>
              </div>
            </div>
            <div class="col-md-5 border-right">
              <div class="card-body">
                  <h6 id="aRoom">room: {{ actual.room }}</h6>
                  <h6 id="aPatient">Patient: {{ actual.patient.first_name }} {{ actual.patient.last_name }}</h6>
              </div>
            </div>
            <div class="col-md-2 d-flex align-items-center">
              <a href="{% url 'visit_detail' actual.id %}" id="aDetail" class="btn btn-outline-light">Detail</a>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
    <br />

      <!--Today's visits-->
  <div class="container">
      <div class="row">
        <div class="col-md-6 text-center">
          <div class="row">
            <div class="col-md-1 text-center"></div>
            <div class="col-md-10 text-center">
              <div class="card mb-3 text-white" style="max-width: 100%; border-radius: 1rem; background-color: #004080; ">
                <div class="card-body">
                  <h5 class="card-title">Today's upcoming visits</h5>
                </div>
              </div>
            </div>
            <div class="col-md-1 text-center"></div>
          </div>
        </div>
        <div class="col-md-6 text-center">
          <div class="row">
            <div class="col-md-1 text-center"></div>
            <div class="col-md-10 text-center">
              <div class="card mb-3 text-white" style="max-width: 100%; border-radius: 1rem; background-color: #004080; ">
                <div class="card-body">
                  <h5 class="card-title">Today's passed visits</h5>
                </div>
              </div>
            </div>
            <div class="col-md-1 text-center"></div>
          </div>
        </div>
      </div>
    </div>

  <div class="container scrollable-today">
        {% for upcoming, past in visits %}
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <div class="col-1"></div>
              <div class="col-10">
                {% if upcoming != null %}
                <div class="upcoming card mb-3 text-white" id="visit{{ upcoming.id }}" style="max-width: 50vw; border-radius: 1rem;
                     background-color: {% if upcoming.status == 'passed' %} #06156C;
                                       {% elif upcoming.status == 'free' %} #01803F;
                                       {% elif upcoming.status == 'occupied' %} #59048D;
                                       {% else %} #9E029E; {% endif %} ">
                  <div class="row g-0">
                    <div class="col-md-2 border-right d-flex align-items-center border-end">
                      <div class="col text-center">
                        <h6 id="uStartTime">{{ upcoming.start_time|time:"H:i" }}</h6>
                        <h6 id="uEndTime">{{ upcoming.end_time|time:"H:i" }}</h6>
                      </div>
                    </div>
                    <div class="col-md-8 border-right">
                      <div class="card-body">
                        <h4 class="card-title" id="uVisitName">{{ upcoming.name.name }}</h4>
                        <div class="card-text">
                          <h6 id="uPatient">Patient: {{ upcoming.patient.first_name }} {{ upcoming.patient.last_name }} {{ upcoming.date }}</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2 d-flex align-items-center">
                      <a href="{% url 'visit_detail' upcoming.id %}" id="iDetail" class="btn btn-outline-light">Detail</a>
                    </div>
                  </div>
                </div>
                {% endif %}
              </div>
              <div class="col-1 text-center"></div>
            </div>
          </div>
          <div class="col-md-6 text-center">
            <div class="row">
              <div class="col-md-1 text-center"></div>
              <div class="col-md-10">
                {% if past != null%}
                <div class="passed card mb-3 text-white" id="visit{{ past.id }}" style="max-width: 50vw; border-radius: 1rem;
                     background-color: {% if past.status == 'passed' %} #06156C;
                                       {% elif past.status == 'free' %} #01803F;
                                       {% elif past.status == 'occupied' %} #59048D;
                                       {% else %} #9E029E; {% endif %} ">
                  <div class="row g-0">
                    <div class="col-md-2 border-right d-flex align-items-center border-end">
                      <div class="col text-center">
                        <h6 id="pStartTime">{{ past.start_time|time:"H:i" }}</h6>
                        <h6 id="pEndTime">{{ past.end_time|time:"H:i" }}</h6>
                      </div>
                    </div>
                    <div class="col-md-8 border-right">
                      <div class="card-body">
                        <h4 class="card-title" id="pVisitName">{{ past.name.name }}</h4>
                        <div class="card-text">
                          <h6 id="pPatient">Patient: {{ past.patient.first_name }} {{ past.patient.last_name }}</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2 d-flex align-items-center">
                      <a href="{% url 'visit_detail' past.id %}" id="pDetail" class="btn btn-outline-light">Detail</a>
                    </div>
                  </div>
                </div>
                {% endif %}
              </div>
              <div class="col-md-1 text-center"></div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
</div>
{% endblock %}